%-------------------------------------------------------------------------------
% cookbook_instruments
%-------------------------------------------------------------------------------
%
% \file        cookbook_instruments.tex
% \library     Documents
% \author      Chris Ahlstrom
% \date        2015-07-12
% \update      2015-07-15
% \version     $Revision$
% \license     $XPC_GPL_LICENSE$
%
%     Provides the cookbooks_instruments section of yoshimi-cookbook.tex.
%
%-------------------------------------------------------------------------------

\section{Creating Instruments}
\label{sec:cookbook_instruments}

   One of our goals in using \textsl{Yoshimi} is to support
   \textsl{General MIDI} (\textsl{GM})
   to the greatest extent possible.

   However, no banks have been created with GM in mind.  And many of the
   instruments, though given names that indicate what they are intended to
   be, fall well short of being recognizable per their name; they should be
   doable with a complex synthesizer like \textsl{Yoshimi}.
  
   It is true that there are a vast number of patches out there.  The author
   has attempted a survey of them, and the task is all but impossible.
   Still, many candidates have been identified.  Other candidates might be
   suitable with a little tweaking.

   Here are a number of categories of instruments for which we want to
   assemble an improved set of instruments.

   \begin{enumber}
      \item \textbf{Bells}
      \item \textbf{Ethnic}
      \item \textbf{Drums}
      \item \textbf{Effects}
      \item \textbf{Piano}
      \item \textbf{Leads}
      \item \textbf{Guitar}
      \item \textbf{Strings} (individual and ensemble)
      \item \textbf{Bass}
      \item \textbf{Saxophones}
   \end{enumber}

   For these recipes, the \texttt{banks} and \texttt{presets} directories will
   be stored in the following directory of this project:

   \begin{verbatim}
      yoshimi/gm/demos
   \end{verbatim}

\subsection{Bells}
\label{subsec:cookbook_instruments_bells}

   The bells patches we've heard so far are nice, but a bit anemic.
   
   Good bell patches need to include ring modulation, done right.  We're not
   sure if there are any such patches extant; please send us to them if
   there are some.

   In the meantime, creating bells is a good excuse to master
   \textsl{Yoshimi}'s ring modulator.
   However, we will first learn how to create a reasonable, clangy bell
   using just a few voices in an ADDsynth part, and no need for modulation.

\subsubsection{Bells by Voices}
\label{subsec:cookbook_instruments_bells_by_voices}

   The following table comes from a tutorial (\cite{bellsimple}).  Along
   with a spectrum shown in reference \cite{bellspectrum}, it allows us to
   recreate a simple, but realistic bell.

\label{table:simple_bell_tones}
\begin{longtable}{c c c c}
   \caption{Simple Bell Tones} \\
   \hline
      \textbf{Wave Number} &
      \textbf{Frequency Fraction} &
      \textbf{Cents Offset} &
      \textbf{Relative Amplitude} \\
   \hline
   \endfirsthead

   1 &         0.56 &         -1000 &     0.5   \\
   2 &         0.92 &         -140  &     1.0   \\
   3 &         1.19 &         +300  &     0.5   \\
   4 &         1.71 &         +930  &     0.25  \\
   5 &         2.00 &         +1200 &     0.125 \\
   6 &         2.74 &         +1745 &     0.125 \\
   7 &         3.00 &         +1901 &     0.125 \\
   8 &         3.76 &         +2290 &     0.125 \\
   9 &         4.00 &         +2400 &           \\
\end{longtable}

   Note that the frequencies are relative to the fundamental frequency (F).
   Also note that wave 2 (F) can be missing and the sound is still
   bell-like.

   The file \texttt{yoshimi/banks/demo/Bells-simple-addsynth.xiz} is the
   result of following the steps below.  We start, as usual, with a
   newly-started \textsl{Yoshimi} instance.

   \begin{enumber}
      \item Open the ADDsynth editing window by clicking the \textbf{Edit}
         button in the bottom panel, and then clicking the ADDsynth
         \textbf{Edit} button in the edit window.
      \item Click on the \textbf{Show Voice Parameters} button.
         Note that it is \textbf{Current Voice 1}, and it should be enabled.
      \item For voice 1, make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 0.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to -1000 approximately.
         \end{itemize}
      \item Go to voice 2, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 0.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to -140 approximately.
         \end{itemize}
      \item Go to voice 3, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 0.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to 300 approximately.
         \end{itemize}
      \item Go to voice 4, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 0.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to 930 approximately.
         \end{itemize}
      \item Go to voice 5, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 1.
            \item \textbf{Detune Type}: Set to Default.
            \item \textbf{FREQUENCY Detune}: Set to 0.
         \end{itemize}
      \item Go to voice 6, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 1.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to 545 approximately.
         \end{itemize}
      \item Go to voice 7, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 1.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to 700 approximately.
         \end{itemize}
      \item Go to voice 8, and make the following settings:
         \begin{itemize}
            \item \textbf{Octave}: Set to 1.
            \item \textbf{Detune Type}: Set to E1200cents.
            \item \textbf{FREQUENCY Detune}: Set to 1090 approximately.
         \end{itemize}
   \end{enumber}

   These settings then end up roughly matching the settings of the first 8
   waves in table~\ref{table:simple_bell_tones}.
   This instrument isn't perfect.  It's not quite equally tempered, though
   close.  The character of the tone changes a bit as the notes get higher.
   One can fiddle with the relative amplitudes of the various voices to
   change the character of this sound.

\subsubsection{Ring Modulation with 440 Hz Tone}
\label{subsec:cookbook_instruments_ring_mod_440}

   Now for an initial demonstration of ring modulation.
   This demonstration does not create a bell tone, but does show
   the sound of modulation.

   Start with a fresh \textsl{Yoshimi} and a cleared instrument ("Simple
   Sound").  Open the virtual keyboard using the \textbf{virKbd} button.
   Click a key and verify that you can hear a tone.  We'll use the middle C
   key (the "comma" on the PC keyboard) as a reference.

   The following steps will set up two tones, voice 1 and voice 2, and voice
   2 will use voice 1 as an external modulator.
   Note that you can accomplish most of these steps by loading the project
   file \texttt{yoshimi/banks/demo/Bells-440-ring-modulation.xiz}, but use
   that only as a last resort.

   \begin{enumber}
      \item Open the ADDsynth editing window by clicking the \textbf{Edit} button
         in the bottom panel, and then clicking the ADDsynth \textbf{Edit}
         button in the edit window.
      \item In the \textbf{Amplitude Env} sub-panel, increase the
         \textbf{D.dt} and \textbf{R.dt} to give the current
         sound a nice slow decay.
      \item Click on the \textbf{Show Voice Parameters} button.
         Note that it is \textbf{Current Voice 1}, and it should be enabled.
      \item Switch to \textbf{Current Voice} number 2 and enable it.
         Play the "C" note, and observe that it is the same frequency, but
         louder.
      \item Move the \textbf{FREQUENCY Detune} slider a bit, and play the "C"
         note.  It should sound the same as before, but change slowly in
         amplitude, as heard and as seen on the \textbf{VU meter}.
         Try to set the detune back to 0; this is easier if you highlight
         the tuning knob and use the left or right arrow keys.
      \item In the \textbf{MODULATOR} section of voice 2, for \textbf{Type},
         select the \textbf{RING} value.  (However, feel free to select one
         of the other modulators, to experiment, once you've mastered
         the ring modulator.)  Press the "C" key again, and notice
         that the tone character changes a bit.  This is due to the internal
         modulator.
      \item For \textbf{External Mod.} for voice 2, select
         \textbf{Ext.M} 1, to use the voice 1 as the internal modulator.
         The "C" note may change in character, but only slightly.
         Apparently the default internal modulator is the same as the
         default external voice 1 waveform.
      \item To actually hear some modulation, we have to separate the
         frequencies of voice 1 and voice 2.  Click the \textbf{440Hz}
         check-box in the \textbf{FREQUENCY} section of voice 1.  Press the
         "C" key and verify hearing a two-tone signal, somewhat like a phone
         tone.
      \item Now go back to voice 2 and click the \textbf{Change} button to
         bring up the ADDsynth oscillator dialog.
      \item Move the slider to maximum for harmonic 10.  Press the "C" key
         and verify the new sound (a bit like a car horn).
         Set the sliders back to 0, and "C" will be a single tone again.
      \item Change the \textbf{Octave} values of voice 2 in its
         \textbf{FREQUENCY} section and listen to the effects.
   \end{enumber}

   Now we need to see if we can apply modulation across instruments.
   Sadly, this does not seem to be possible.

\subsection{Ethnic}
\label{subsec:cookbook_instruments_ethnic}

   We've found a simple steel drum instruments, but think we might do better,
   creating one using ADDsynth and one using PADsynth.

   Instruments we have not found, and would like to synthesize, are:
   bagpipes and arabic pipes.

\subsection{Drums}
\label{subsec:cookbook_instruments_drums}

   We want a decent drum kit that attempts to fill in the gaps for a
   GM-compliant drum kit with solid sounds, and we think we've done it, with
   the help of an existing kit.

\subsection{Effects}
\label{subsec:cookbook_instruments_effects}

   We've created a nice dial-tone effect that we'll describe here.

\subsection{Piano}
\label{subsec:cookbook_instruments_piano}

   TODO.

\subsection{Leads}
\label{subsec:cookbook_instruments_leads}

   TODO.

\subsection{Guitar}
\label{subsec:cookbook_instruments_guitar}

   TODO.

\subsection{Strings} (individual and ensemble)
\label{subsec:cookbook_instruments_strings}

   TODO.

\subsection{Bass}
\label{subsec:cookbook_instruments_bass}

   TODO.

\subsection{Saxophones}
\label{subsec:cookbook_instruments_saxophones}

   TODO.

%-------------------------------------------------------------------------------
% vim: ts=3 sw=3 et ft=tex
%-------------------------------------------------------------------------------
