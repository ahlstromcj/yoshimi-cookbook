Construction of "Before You Accuse Me" for ZynAddSubFx/Yoshimi
Chris Ahlstrom
2012-01-20 to 2016-04-20

This file describes the importing of one of my old Cakewalk transcriptions, a
rendering of Eric Clapton and Robert Cray from a transcription that someone
gave to me to try out.  It was originally transcribed to fit the Yahama
PSS-790, as I recall (it was years and years ago!)

First, let's run it as is through timidity:

$ timidity b4uacuse.mid 
Format: 1  Tracks: 14  Divisions: 120
Track name: PSS-790 Patchin
Track name: Guitar 1 (E.C.)
Track name: Guitar 2 (R.C.)
Track name: Vocal
Track name: Rhythm (Chords)
Track name: Bass Guitar
Track name: Drums
Track name: Chris Ahlstrom
Track name: (GEnie: KICKAHA
Track name: "Before You
Track name: Accuse Me" by
Track name: Eric Clapton &
Track name: Robert Cray
No instrument mapped to tone bank 0, program 12 -
	 this instrument will not be heard
No instrument mapped to tone bank 0, program 87 -
	 this instrument will not be heard

Our /etc/timidity/timidity.cfg file specifies the /etc/timidity/freepats.cfg
file.  In this file, we see that bank 0 does not define the three patch numbers
that are noted as missing above and below:  12, 62, and 87.  Patch 12 on the
PSS-790 is "Marimba", but is mapped to GM's "Jazz Guitar" ("Elec. Guitar
(jazz)").  In Timidity's freepats, this is patch 26.  Patch 0 is mapped to
patch 62, which is "Synth Brass 1" in GM; the closest in Timidity's freepats is
patch 61 "Brass Section".  Patch 87 on the PSS-790 is "Lead 8 (bass+lead)"
which gets mapped to "Flugelhorn" ("English Horn").

Let's use midicvtpp to convert it to good (we hope) GM format:

   $ midicvtpp --m2m GM_PSS-790_Multi.ini -i b4uacuse.mid -o b4uacuse-gm-1.mid

or, for more information:

   $ midicvtpp --m2m GM_PSS-790_Multi.ini
         --summarize b4uacuse.mid b4uacuse-gm-1.mid 2> summary.txt

The command creates a file that has only one "error" message and
plays pretty well:

	No instrument mapped to tone bank 0, program 62 -
       this instrument will not be heard

Again, note that patch 62 is a "Synth Brass 1" patch.

We can't tell what the target voices of the PSS-790 were, and what they were
converted to.  That sounds like a feature to add to midicvtpp!  Done, in version
0.4.0!  We can go forward with the GM MIDI bank we have created for Yoshimi.
Take a look at the file summary.txt.  Used in the patch descriptions above.

The next step is to see how these patches map to our preliminary Yoshimi GM
bank.



----------------------------------------------

Yoshimi parts from the gm-basic bank:

   1. Ch 10.  0129-Drum Kit.xiz
   2. Ch  6.  0011-Music Box.xiz
   3. Ch  7.  0049-String Ensemble 1.xiz
   4. Ch  9.  0034-Electric Bass finger.xiz
   5. Ch  8.  0007-Harpsichord.xiz
   6. Ch  3.  0093-Pad 5 bowed.xiz
   7. Ch  2.  0094-Pad 6 metallic.xiz
   8. Ch  5.  0063-Brass Section.xiz
   9. Ch  4.  0115-Steel Drums.xiz (muted)

The bank must be installed in ~/.config/yoshimi-cookbook/banks.

Sequencer64 settings:

   [1] seq24 1 Channel 10

To set up and play the tune (using ALSA):

   1. Make sure that the seq24 or sequencer64 config ("rc") files
      specify 0 for manual-alsa-ports, and do not set up any MIDI clocks.

   2. yoshimi -a -A -l wpb_yoshimi_params.xmz

   3. sequencer64 wpb_yoshimi.midi &

   4. File / Options / MIDI Clock:  Verify which MIDI buss Yoshimi is
      on.  In our case, it is on buss 5 (buss 0 is Midi Through, and 1
      through 4 are ports created by TiMidity).  There are probably better
      ways to do this, but right click on each pattern to select buss 5 and
      the channel shown after the dash in the lower left corner of each
      pattern.  Probably best to save this to a new file, just in case.

   5. Open the Song Editor of sequencer64.  Click the red play arrow.

